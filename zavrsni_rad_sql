--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2025-06-16 16:56:25 CEST

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'LATIN2';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 861 (class 1247 OID 16389)
-- Name: user_role; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.user_role AS ENUM (
    'trainer',
    'attendant',
    'admin'
);


ALTER TYPE public.user_role OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 218 (class 1259 OID 22168)
-- Name: features; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.features (
    id integer NOT NULL,
    name character varying(100) NOT NULL
);


ALTER TABLE public.features OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 22167)
-- Name: features_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.features ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.features_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 219 (class 1259 OID 22173)
-- Name: gym_attendants; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.gym_attendants (
    gym_plan_id integer,
    trainings_done integer,
    id bigint NOT NULL
);


ALTER TABLE public.gym_attendants OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 22180)
-- Name: plan_features; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.plan_features (
    feature_id integer NOT NULL,
    included boolean NOT NULL,
    plan_id integer NOT NULL
);


ALTER TABLE public.plan_features OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 22178)
-- Name: plan_features_feature_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.plan_features ALTER COLUMN feature_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.plan_features_feature_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 221 (class 1259 OID 22179)
-- Name: plan_features_plan_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.plan_features ALTER COLUMN plan_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.plan_features_plan_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 22186)
-- Name: plans; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.plans (
    annual_price numeric(2,0) NOT NULL,
    description text,
    id integer NOT NULL,
    monthly_price numeric(2,0) NOT NULL,
    popular boolean,
    name character varying(100) NOT NULL
);


ALTER TABLE public.plans OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 22185)
-- Name: plans_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.plans ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.plans_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 227 (class 1259 OID 22195)
-- Name: session_attendants; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.session_attendants (
    session_id integer NOT NULL,
    user_id integer NOT NULL
);


ALTER TABLE public.session_attendants OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 22193)
-- Name: session_attendants_session_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.session_attendants ALTER COLUMN session_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.session_attendants_session_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 22194)
-- Name: session_attendants_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.session_attendants ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.session_attendants_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 229 (class 1259 OID 22201)
-- Name: sessions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sessions (
    current_attendants integer,
    id integer NOT NULL,
    max_attendants integer NOT NULL,
    timeslot time without time zone NOT NULL,
    date date NOT NULL,
    day_in_week character varying(20) NOT NULL,
    description character varying(100),
    title character varying(100) NOT NULL
);


ALTER TABLE public.sessions OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 22200)
-- Name: sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.sessions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.sessions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 232 (class 1259 OID 22213)
-- Name: trainer; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.trainer (
    rating numeric(3,2) NOT NULL,
    id bigint NOT NULL
);


ALTER TABLE public.trainer OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 22207)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    birthdate date NOT NULL,
    enabled boolean NOT NULL,
    role smallint,
    id bigint NOT NULL,
    username character varying(20) NOT NULL,
    first_name character varying(50) NOT NULL,
    last_name character varying(50) NOT NULL,
    email character varying(100) NOT NULL,
    password character varying(255) NOT NULL,
    CONSTRAINT users_role_check CHECK (((role >= 0) AND (role <= 2)))
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 22206)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3490 (class 2606 OID 22172)
-- Name: features features_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.features
    ADD CONSTRAINT features_pkey PRIMARY KEY (id);


--
-- TOC entry 3492 (class 2606 OID 22177)
-- Name: gym_attendants gym_attendants_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.gym_attendants
    ADD CONSTRAINT gym_attendants_pkey PRIMARY KEY (id);


--
-- TOC entry 3494 (class 2606 OID 22184)
-- Name: plan_features plan_features_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.plan_features
    ADD CONSTRAINT plan_features_pkey PRIMARY KEY (feature_id, plan_id);


--
-- TOC entry 3496 (class 2606 OID 22192)
-- Name: plans plans_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.plans
    ADD CONSTRAINT plans_pkey PRIMARY KEY (id);


--
-- TOC entry 3498 (class 2606 OID 22199)
-- Name: session_attendants session_attendants_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.session_attendants
    ADD CONSTRAINT session_attendants_pkey PRIMARY KEY (session_id, user_id);


--
-- TOC entry 3500 (class 2606 OID 22205)
-- Name: sessions sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sessions
    ADD CONSTRAINT sessions_pkey PRIMARY KEY (id);


--
-- TOC entry 3504 (class 2606 OID 22217)
-- Name: trainer trainer_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.trainer
    ADD CONSTRAINT trainer_pkey PRIMARY KEY (id);


--
-- TOC entry 3502 (class 2606 OID 22212)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 3506 (class 2606 OID 22223)
-- Name: trainer fkd2hg6g09xsi5yyhtg5btyx13m; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.trainer
    ADD CONSTRAINT fkd2hg6g09xsi5yyhtg5btyx13m FOREIGN KEY (id) REFERENCES public.users(id);


--
-- TOC entry 3505 (class 2606 OID 22218)
-- Name: gym_attendants fktqf3fw3jwbnagot5rfdyr564s; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.gym_attendants
    ADD CONSTRAINT fktqf3fw3jwbnagot5rfdyr564s FOREIGN KEY (id) REFERENCES public.users(id);


-- Completed on 2025-06-16 16:56:26 CEST

--
-- PostgreSQL database dump complete
--

